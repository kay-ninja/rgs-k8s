replicaCount: 1

image:
  repository: rg.fr-par.scw.cloud/ejaw/history
  pullPolicy: IfNotPresent
  tag: "1.0.98"

imagePullSecrets:
  - name: docker-registry-credentials

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations:
  sidecar.istio.io/inject: "true"
  prometheus.io/scrape: "true"
  prometheus.io/port: "7210"

podLabels: {}

podSecurityContext:
  fsGroup: 1000

securityContext:
  privileged: true
  allowPrivilegeEscalation: true
  runAsUser: 0
  runAsNonRoot: false
  capabilities:
    add:
    - ALL
  readOnlyRootFilesystem: false

service:
  type: ClusterIP
  httpPort: 7210
  grpcPort: 7200
  annotations: {}

env:
  gomaxprocs: "6"

extraEnv: []

shmSize: "1Gi"

resources:
  limits:
    cpu: 1000m
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 1Gi

livenessProbe:
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 10
  successThreshold: 1
  failureThreshold: 5

readinessProbe:
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 10
  successThreshold: 1
  failureThreshold: 3

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

volumes: []
volumeMounts: []

nodeSelector:
  workload: core-services
  
tolerations: []

affinity: {}

# GeoIP Database - Pre-created PVC containing country.mmdb file
# The PVC must contain the file at: country.mmdb (64MB MaxMind GeoIP2 Country database)
geoip:
  pvcName: "history-geoip"

# Application configuration
config:
  server:
    readTimeout: "300s"
    writeTimeout: "300s"

  rpc:
    maxProcessingTime: "30000ms"

  exchange:
    host: exchange.rgs-core.svc.cluster.local
    port: 7100
    isSecure: false

  database:
    host: 77.93.172.59
    port: 5432
    name: history
    user: history
    pass: "0598bab0-f85e-448c-a013-3fd4a8faf570"
    connectionTimeout: "300s"
    compression: "zlib"
    pingInterval: "30s"
    minConnections: 100
    maxConnections: 200

  redis:
    host: redis-master.rgs-infrastructure.svc.cluster.local
    port: 6379
    pass: ""
    prefix: "svc.history-service"

  tracer:
    disabled: true
    url: http://192.168.100.44:14268/api/traces
    serviceName: history

  logger:
    logLevel: debug

  xe:
    id: okBX34h8eLdRCC0RLW1DP83iLPZvBFBy
    key: YwRQOnlxzmSCKKTqhmszGgztGS7Y6IAT

  ip2country:
    mode: disabled