apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "history.fullname" . }}-config
  labels:
    {{- include "history.labels" . | nindent 4 }}
data:
  config.yaml: |
    server:
      host: "0.0.0.0"
      port: {{ .Values.service.httpPort }}
      readTimeout: {{ .Values.config.server.readTimeout | quote }}
      writeTimeout: {{ .Values.config.server.writeTimeout | quote }}

    rpc:
      host: 0.0.0.0
      port: {{ .Values.service.grpcPort }}
      maxProcessingTime: {{ .Values.config.rpc.maxProcessingTime }}

    exchange:
      host: {{ .Values.config.exchange.host }}
      port: {{ .Values.config.exchange.port }}
      isSecure: {{ .Values.config.exchange.isSecure }}

    database:
      host: {{ .Values.config.database.host }}
      port: {{ .Values.config.database.port }}
      name: {{ .Values.config.database.name }}
      user: {{ .Values.config.database.user }}
      pass: {{ .Values.config.database.pass }}
      connectionTimeout: {{ .Values.config.database.connectionTimeout | quote }}
      compression: {{ .Values.config.database.compression | quote }}
      pingInterval: {{ .Values.config.database.pingInterval | quote }}
      minConnections: {{ .Values.config.database.minConnections }}
      maxConnections: {{ .Values.config.database.maxConnections }}

    redis:
      host: {{ .Values.config.redis.host }}
      port: {{ .Values.config.redis.port }}
      pass: {{ .Values.config.redis.pass }}
      prefix: {{ .Values.config.redis.prefix | quote }}

    tracer:
      disabled: {{ .Values.config.tracer.disabled }}
      url: {{ .Values.config.tracer.url }}
      serviceName: {{ .Values.config.tracer.serviceName }}

    logger:
      logLevel: {{ .Values.config.logger.logLevel }}

    xe:
      id: {{ .Values.config.xe.id }}
      key: {{ .Values.config.xe.key }}

    ip2country:
      cacheLifetimeHours: {{ .Values.config.ip2country.cacheLifetimeHours }}
      ipInfoToken: {{ .Values.config.ip2country.ipInfoToken | quote }}
      masterMode: {{ .Values.config.ip2country.masterMode }}
      masterURL: {{ .Values.config.ip2country.masterURL | quote }}
